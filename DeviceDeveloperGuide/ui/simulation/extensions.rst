Inputs Extensions
=================

The mock engine also requires several extensions to know how to react to
input events. The extension names (package and classname) are specified
in the fp file.

Widgets and Listeners
---------------------

For widgets that generate events, a ``Listener`` class must be specified
within the ``.fp`` file.

As an example, consider this snippet of an ``.fp`` file for defining a
push button:

::

   <push id="0" x="54" y="117"
       skin="square-normal.png"                
       pushedSkin="square-pressed.png"                
       listenerClass="com.is2t.MyPushListener" />

The value of the ``listenerClass`` attribute is the fully qualified name
of a class which has to implement the
``com.is2t.microej.frontpanel.input.listener.PushButtonListener``
interface. This class,  ``com.is2t.MyPushListener``, is written by the
developer, and implements the ``PushButtonListener`` interface.

The package ``com.is2t.microej.frontpanel.input.listener`` provides
``Listeners`` required by other widgets too:

-  ``push`` requires ``PushButtonListener``

-  ``repeatPush`` requires ``RepeatButtonListener``

-  ``joystick`` requires ``JoystickListener``

-  ``pointer`` requires ``PointerListener``

A listener implementation can target several widgets. Each action method
receives the ID of the widget that has changed as a parameter.

Event Generator
---------------

The ``Listener`` needs to be written to generate the same events that
the hardware will. In order to send an event, the implementation of a
``Listener`` needs to use the ``EventGenerator`` class provided. For
example, a ``PushButtonListener`` can generate button events by calling
static methods ``sendButtons[...]Event``.

.. note::

   A ``Listener`` can generate events using any methods of the provided
   ``EventGenerator``. In some cases, this may provide useful
   functionality.

Each ``EventGenerator`` method requires a unique ID of the MicroUI event
generator it targets. This unique ID is available in the interface
``com.is2t.microej.microui.Constants`` which has been generated by the
Static MicroUI Initializer tool.

The ``EventGenerator`` class targets six MicroUI event generators:

-  ``EventGenerator``: ``sendEvent``, ``sendEvents``

-  ``CommandEventGenerator``: ``sendCommandEvent``

-  ``ButtonsEventGenerator``: ``sendButtons[...]Event``

-  ``PointerEventGenerator``: ``sendPointer[...]Event``

-  ``TouchEventGenerator``: ``sendTouch[...]Event``

-  ``StatesEventGenerator``: ``sendState[...]Event``
