<?xml version="1.0" encoding="UTF-8"?>
<project name="wbe-doc" default="generate">

	<target name="generate">
		<property name="title.level" value="3" /> <!-- start with sections === -->
		<property name="output.conditions" value="false" />
		<property name="jars.dir" location="jars" />
		<property name="architecture.dir" location="architecture" />

		<mkdir dir="${jars.dir}"/>
		<copy todir="${jars.dir}" flatten="true" overwrite="true">
			<fileset dir="${architecture.dir}" includes="**/workbenchExtension*.jar">
				<!-- exclude deprecated modules -->
				<exclude name="**/*nls*"/>
				<exclude name="**/*store*"/>
				<exclude name="**/*cldc*"/>
			</fileset>
		</copy>

		<microbsp.buildJPFExtension 
			titleLevel="${title.level}" 
			imagewidth="1080" 
			imageheight="600" 
			verboselevel="9" 
			maxImageWidth="150" 
			outputdir="${basedir}/../../StandaloneAppDevGuide" 
			imagesoutputname="png/architecture_options" 
			outputname="sectionArchitectureOptions.rst" 
			outputConditions="${output.conditions}" 
			outputFormat="ReStructuredText" 
			maxnbcolumns="79">
			<extensionClasspath>
				<!-- 
					For correct category merge, only the root file is provided to the generator 
					Other extensions workbenchExtension[xxx] are automatically loaded by the workbench 
				-->
				<path location="${jars.dir}/workbenchExtension.jar"/>
			</extensionClasspath>
		</microbsp.buildJPFExtension>
	</target>
</project>